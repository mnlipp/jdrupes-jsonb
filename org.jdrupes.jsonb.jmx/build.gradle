/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    id 'org.jdrupes.java-library-conventions'
    id 'org.jdrupes.java-doc-conventions'
}

dependencies {
    api 'jakarta.json:jakarta.json-api:2.1.2'
    api 'jakarta.json.bind:jakarta.json.bind-api:3.0.1'
    testImplementation 'org.apache.johnzon:johnzon-jsonb:2.0.1'
}

base {
    archivesName = "jsonb-jmx"
}

// Derive bundle version and propagate to bnd
def bundleVersion = isSnapshot
    ? (version.substring(0, version.lastIndexOf("-SNAPSHOT")) + ".-\${tstamp}-SNAPSHOT")
    : (version + ".rel")

ext.bnd = [
    'Bundle-Name': 'JDrupes JSON-B JMX plugin',
    'Bundle-SymbolicName': 'org.jdrupes.jsonb.jmx',
    'Bundle-Copyright': 'Michael N. Lipp (c) 2024',
    'Bundle-License': 'https://www.gnu.org/licenses/agpl-3.0.txt',
    'Bundle-Version': bundleVersion,
    '-sources': 'true',
    '-runee': 'JavaSE-21',
    'Export-Package': 'org.jdrupes.jsonb.jmx'
]

jar {
    manifest {
        attributes(bnd)
    }
}
       